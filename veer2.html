<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />

<style>

.pole{
 position:fixed;
width:100px;
height:200px;
border: 4px double black;
  border-radius:5%;
  bottom:30%;
  left:40%;
  transform-origin: 50% 100% 0;
	background-color: #FF7373;
}
.pole:hover {
   background-color: red;
}





#win{
position: fixed;
width:600px;
height:540px;
border: 4px double black;
border-radius:5%;
background-color: green;

}

.sk{
	background-color: blue;
	border-radius: 50%;
}

.veer{
position:fixed;
width:100%;
height:60%;

bottom:0%;
left: -5%;
transform-origin: 50% 80% 0;
}
</style>
</head>
<body>
<div id='win'>
<div class='veer'></div>
<div class='veer'></div>
<div class='veer'></div>
</div>
<script>

var zi=0;var sm=0;
 stol=document.getElementsByClassName('veer');
 pole=document.getElementsByClassName('pole');
stol[0].py=+window.getComputedStyle(stol[0]).getPropertyValue('bottom').slice(0,-2);stol[0].rot=0;
stol[1].py=+window.getComputedStyle(stol[1]).getPropertyValue('bottom').slice(0,-2);stol[1].rot=0;ty(stol[1],-70);
stol[2].py=+window.getComputedStyle(stol[2]).getPropertyValue('bottom').slice(0,-2);stol[2].rot=0;ty(stol[2],-140);

function shirKvis(i){i.style.width=`${i.getBoundingClientRect().height/2}px`}
//window.addEventListener( 'resize', ps, false );//ps();
function ps(){
  Array.prototype.forEach.call(pole,(i)=>{shirKvis(i)})
};

function dk(){
						if (zi<12)s=stol[0];if (zi>=12)s=stol[1];if (zi>=24)s=stol[2];
						s.appendChild(document.createElement('div')).className='pole';
						var p=pole[pole.length-1];
					  p.rot=0;
						//p.addEventListener('mouseout',zatem,true);p.addEventListener('mouseover',osvet,true);
            p.px=+window.getComputedStyle(pole[pole.length-1]).getPropertyValue('left').slice(0,-2);
            p.py=+window.getComputedStyle(pole[0]).getPropertyValue('bottom').slice(0,-2);
            p.style.zIndex=zi;p.zi=zi;zi++;
            veer(p,s);
            }
              //if(12<zi<24){ty(pole[pole.length-1]);};



function veer(e,s){
	if (s==stol[0])ss=0;if (s==stol[1])ss=12;if (s==stol[2])ss=24;
	rot(e,(zi-ss)*10);tx(e,(zi-ss)*10);rot(s,-4);ty(s,-4);
};
function veer2(e){rot(e,zi*10);tx(e,zi*10);};



function rot (e,g){e.rot+=g; e.style.transform=`rotate(${e.rot}deg)`}

function ty(e,y){e.py+=y;e.style.bottom=e.py+'px'}
function tx(e,x){e.px+=x;e.style.left=e.px+'px'}
itc=0;
interval=setInterval(()=>{dk();itc++;if(itc>=36)clearInterval(interval)},100);

function osvet(e) {e.target.style.backgroundColor='#FFC3C3'}
function zatem(e) {}//e.style.backgroundColor='#FF7373'}


//pole[0].style.width=`${pole[0].getBoundingClientRect().height/20}px`
//# sourceURL=userscript.js
</script>
</body>
</html>
